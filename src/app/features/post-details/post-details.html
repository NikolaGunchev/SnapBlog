@if (combined$ | async; as data) {
  <div class="container mx-auto px-4 py-3 max-w-[1050px] grid grid-cols-1 lg:grid-cols-12 gap-6 relative">
    <div class="post-cotnainer col-span-12 lg:col-span-8">
      <article class="px-3 py-1 mb-5 rounded-md max-h-fit">
        <div class="article-header mb-2 flex justify-between">
          <div class="info-container flex content-center">
            <div class="group-info flex gap-1 content-center">
              <a [routerLink]="['../../']" [relativeTo]="router">
                <div class="img-holder size-9 rounded-full bg-[red]">s</div>
              </a>
                <div class="flex flex-col">
                  <div class="flex">
                    <a [routerLink]="['../../']" [relativeTo]="router">
                      <p class="text-md content-center hover:text-[#76a7a4]">{{groupName}}</p>
                    </a>
                    <span class="px-1">-</span>
                    <p class="time text-md text-gray content-center">{{data.post!.created_at| timeAgo}}</p>
                  </div>
                  <p class="text-xs">{{data.post?.creatorName}}</p>
                </div>
            </div>
          </div>
          @if (data.post?.id === currentUser()?.id) {
            <div class="user-options-container">
              <app-menu-icons></app-menu-icons>
            </div>
          }
        </div>
    <div class="title pb-2">
      <h2 class="text-2xl">{{data.post?.title}}</h2>
    </div>
    @if (data.post!.images.length>0) {
      @for (imageUrl of data.post?.images; track imageUrl) {
        <img [src]="imageUrl" alt="Post Image">
      }
    } @else { 
      <div class="post-content text-md">{{data.post?.content}}</div>
      }
    <div class="post-buttons flex gap-4 mt-3 relative">
      <div class="like-buttons flex bg-[#648d8a1b] rounded-2xl p-2 gap-2">
         <svg class="likes-icon like rounded-2xl size-5 cursor-pointer" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M8.9707 19.42V13.89" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2.28234 12.67C2.25751 12.2167 2.32536 11.7631 2.48175 11.3369C2.63813 10.9106 2.87975 10.5208 3.19187 10.1911C3.504 9.86141 3.88006 9.59877 4.29708 9.41931C4.71411 9.23985 5.16335 9.14734 5.61735 9.14734C6.07135 9.14734 6.52058 9.23985 6.93760 9.41931C7.35463 9.59877 7.73069 9.86141 8.04281 10.1911C8.35493 10.5208 8.59657 10.9106 8.75296 11.3369C8.90934 11.7631 8.97717 12.2167 8.95234 12.67V18.3C8.97717 18.7533 8.90934 19.2070 8.75296 19.6332C8.59657 20.0594 8.35493 20.4492 8.04281 20.7789C7.73069 21.1086 7.35463 21.3712 6.93760 21.5507C6.52058 21.7301 6.07135 21.8227 5.61735 21.8227C5.16335 21.8227 4.71411 21.7301 4.29708 21.5507C3.88006 21.3712 3.50400 21.1086 3.19187 20.7789C2.87975 20.4492 2.63813 20.0594 2.48175 19.6332C2.32536 19.2070 2.25751 18.7533 2.28234 18.3V12.67Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M8.97076 18.3C8.96813 18.7399 9.05217 19.176 9.21809 19.5835C9.38402 19.9909 9.62857 20.3617 9.93779 20.6747C10.247 20.9876 10.6148 21.2366 11.0203 21.4073C11.4257 21.5781 11.8608 21.6674 12.3008 21.67H16.4208C17.3814 21.6693 18.316 21.357 19.0841 20.78C19.8522 20.203 20.4125 19.3924 20.6808 18.47L22.1808 13.39C22.3002 13.0523 22.3372 12.691 22.2889 12.3361C22.2405 11.9812 22.1081 11.643 21.9028 11.3496C21.6974 11.0562 21.4249 10.816 21.1080 10.6491C20.7911 10.4822 20.4389 10.3934 20.0808 10.39H14.5608V5.10999C14.5621 4.91825 14.5256 4.72818 14.4535 4.55054C14.3813 4.37290 14.2749 4.21121 14.1402 4.07471C14.0056 3.93820 13.8454 3.82953 13.6687 3.75494C13.4921 3.68036 13.3025 3.64132 13.1108 3.64001V3.64001C12.7953 3.64144 12.4889 3.74572 12.2381 3.93701C11.9872 4.12830 11.8056 4.39617 11.7208 4.70001L8.97076 13.86" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span class="text-xs content-center">{{data.post?.likesCount}}</span>
      <svg class="likes-icon dislike rounded-2xl size-5 cursor-pointer" viewBox="-0.5 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.66992 5.5V11.03" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M8.66992 11.03L11.4199 20.19C11.5048 20.4938 11.6864 20.7617 11.9372 20.953C12.1881 21.1443 12.4944 21.2486 12.8099 21.25V21.25C13.0016 21.2487 13.1912 21.2097 13.3679 21.1351C13.5445 21.0605 13.7047 20.9518 13.8394 20.8153C13.974 20.6788 14.0805 20.5171 14.1526 20.3395C14.2248 20.1618 14.2612 19.9718 14.2599 19.78V14.5" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M2.00109 12.25C1.97626 12.7033 2.04411 13.157 2.2005 13.5832C2.35688 14.0094 2.59852 14.3993 2.91064 14.7289C3.22276 15.0586 3.59881 15.3212 4.01583 15.5007C4.43286 15.6801 4.88209 15.7727 5.33609 15.7727C5.79008 15.7727 6.23931 15.6801 6.65634 15.5007C7.07336 15.3212 7.44944 15.0586 7.76156 14.7289C8.07368 14.3993 8.31532 14.0094 8.47171 13.5832C8.62809 13.157 8.69594 12.7033 8.67111 12.25V6.62C8.69594 6.16668 8.62809 5.71308 8.47171 5.28687C8.31532 4.86065 8.07368 4.47074 7.76156 4.14105C7.44944 3.81136 7.07336 3.54878 6.65634 3.36932C6.23931 3.18986 5.79008 3.09729 5.33609 3.09729C4.88209 3.09729 4.43286 3.18986 4.01583 3.36932C3.59881 3.54878 3.22276 3.81136 2.91064 4.14105C2.59852 4.47074 2.35688 4.86065 2.2005 5.28687C2.04411 5.71308 1.97626 6.16668 2.00109 6.62V12.25Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M8.66998 6.62C8.66735 6.18006 8.75137 5.74394 8.9173 5.33649C9.08322 4.92904 9.32777 4.55824 9.63699 4.2453C9.94621 3.93237 10.314 3.68341 10.7195 3.51263C11.1249 3.34186 11.56 3.25262 12 3.25H16.12C17.0806 3.25072 18.0152 3.56303 18.7833 4.14001C19.5514 4.717 20.1117 5.52755 20.38 6.45001L21.88 11.53C21.9994 11.8677 22.0365 12.229 21.9881 12.5839C21.9397 12.9387 21.8074 13.277 21.602 13.5704C21.3966 13.8638 21.1241 14.104 20.8072 14.2709C20.4903 14.4378 20.1381 14.5266 19.78 14.53H14.28" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      </div>
      <div class="comment-button bg-[#648d8a1b] rounded-2xl flex p-2 gap-2 hover:bg-[#4d6c6a1a] cursor-pointer">
        <svg class="rounded-2xl size-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4.24999 17.31C4.12892 17.3121 4.00915 17.2849 3.9009 17.2306C3.79266 17.1763 3.69916 17.0966 3.62841 16.9984C3.55766 16.9001 3.51175 16.7862 3.49461 16.6663C3.47747 16.5464 3.48961 16.4242 3.52999 16.31L4.77999 12.19C4.52436 11.4877 4.38913 10.7473 4.37999 10C4.37802 9.13743 4.55154 8.28345 4.88999 7.49003C5.30028 6.51286 5.94398 5.65124 6.76468 4.98069C7.58537 4.31013 8.55801 3.85109 9.59735 3.64382C10.6367 3.43654 11.711 3.48735 12.7261 3.79179C13.7413 4.09623 14.6662 4.64501 15.42 5.39003C16.0049 5.98425 16.473 6.68303 16.8 7.45003C17.1322 8.24163 17.3033 9.09152 17.3033 9.95003C17.3033 10.8085 17.1322 11.6584 16.8 12.45C16.473 13.217 16.0049 13.9158 15.42 14.51C14.5431 15.3854 13.4337 15.9909 12.2231 16.255C11.0126 16.5191 9.75176 16.4306 8.58999 16L4.46999 17.28C4.39833 17.2998 4.32434 17.3099 4.24999 17.31ZM10.84 5.00003C10.1769 4.9981 9.52031 5.13078 8.90999 5.39003C7.72766 5.88899 6.78244 6.82347 6.26999 8.00003C6.01284 8.61273 5.88039 9.27055 5.88039 9.93503C5.88039 10.5995 6.01284 11.2573 6.26999 11.87C6.32957 12.0348 6.32957 12.2152 6.26999 12.38L5.34999 15.38L8.34999 14.46C8.51477 14.4005 8.69521 14.4005 8.85999 14.46C10.0743 14.9643 11.4383 14.97 12.6567 14.4759C13.8752 13.9818 14.85 13.0276 15.37 11.82C15.6626 11.072 15.7707 10.2646 15.6852 9.46592C15.5996 8.6673 15.323 7.90103 14.8786 7.23198C14.4342 6.56293 13.8351 6.01078 13.1321 5.62227C12.4292 5.23376 11.6429 5.02033 10.84 5.00003Z" fill="#000000"/>
          <path d="M19.75 20.5C19.677 20.5098 19.603 20.5098 19.53 20.5L15.41 19.25C13.8622 19.8345 12.1485 19.7988 10.6263 19.1504C9.10411 18.502 7.89101 17.291 7.24001 15.77C7.19551 15.68 7.17006 15.5818 7.16524 15.4815C7.16042 15.3812 7.17634 15.281 7.21201 15.1872C7.24767 15.0933 7.30231 15.0078 7.37251 14.936C7.44272 14.8643 7.52697 14.8077 7.62001 14.77C7.71049 14.7284 7.80834 14.7052 7.90786 14.7019C8.00739 14.6985 8.10658 14.715 8.19967 14.7504C8.29276 14.7857 8.37786 14.8393 8.45003 14.9079C8.5222 14.9765 8.57998 15.0588 8.62001 15.15C8.8577 15.7165 9.19656 16.2349 9.62001 16.68C10.3212 17.3735 11.2117 17.8441 12.1797 18.0327C13.1477 18.2213 14.1498 18.1195 15.06 17.74C15.2248 17.6804 15.4052 17.6804 15.57 17.74L18.57 18.66L17.65 15.66C17.5904 15.4952 17.5904 15.3148 17.65 15.15C17.9093 14.5397 18.0419 13.8831 18.04 13.22C18.0424 12.5681 17.9154 11.9223 17.6665 11.3198C17.4177 10.7173 17.0518 10.1701 16.59 9.71C16.3877 9.45434 16.1635 9.21678 15.92 9C15.8326 8.94754 15.7568 8.8778 15.6972 8.79505C15.6376 8.7123 15.5955 8.61827 15.5735 8.51871C15.5515 8.41915 15.5501 8.31614 15.5692 8.21599C15.5884 8.11585 15.6277 8.02065 15.6849 7.93624C15.7421 7.85182 15.8159 7.77995 15.9018 7.72502C15.9877 7.67009 16.0839 7.63325 16.1845 7.61675C16.2852 7.60026 16.3881 7.60445 16.487 7.62908C16.586 7.65371 16.6789 7.69826 16.76 7.76C17.1177 7.99091 17.4526 8.25544 17.76 8.55C18.3481 9.14159 18.8167 9.84102 19.14 10.61C19.4793 11.4067 19.6528 12.2641 19.65 13.13C19.6479 13.8975 19.5126 14.6588 19.25 15.38L20.5 19.5C20.5404 19.6142 20.5525 19.7364 20.5354 19.8563C20.5183 19.9761 20.4723 20.0901 20.4016 20.1883C20.3308 20.2866 20.2373 20.3663 20.1291 20.4206C20.0209 20.4748 19.9011 20.5021 19.78 20.5H19.75Z" fill="#000000"/>
        </svg>
        <span class="text-xs opacity-75 self-center">{{data.post?.commentsCount}}</span>
      </div>
    </div>
  
    <app-comments [comments]="data.comments"></app-comments>
    <!-- <div class="comments-section mt-5">
      <div class="comment-field flex-grow flex items-center justify-center  min-w-[150px] sm:min-w-[200px] md:min-w-[300px] relative mb-5">
        @if (!authService.isLoggedIn()) {
          <div
            (click)="openSnackBar('Please login first to post a comment')"
            class="absolute inset-0 cursor-pointer z-10 rounded-full"
          ></div>
        }
        <input type="text" id="comment" placeholder="Type a comment" [disabled]="!authService.isLoggedIn()"
          class="w-full pl-10 pr-4 py-1 border-2 border-[#fff1dc] bg-[#f6edd9] rounded-full focus:outline-none transition-all duration-300">
      </div>
  
      <div class="comments flex flex-col gap-5">
        @for (comment of data.comments; track $index) {
          <div class="comment p-1">
              <div class="info-container flex content-center">
                <div class="user-info flex gap-1">
                    <div class="img-holder size-7 rounded-full bg-[red]"></div>
                    <p class="text-xs content-center">{{comment.creatorName}}</p>
                </div>
                <span class="px-1 self-center">-</span>
                <p class="time text-xs text-gray content-center">{{comment.created_at | timeAgo}}</p>
              </div>
              <div class="post-content text-sm opacity-75 p-3">{{comment.text}}</div>
              <div class="comment-buttons flex gap-3 mt-3 relative">
                <div class="like-buttons flex bg-[#648d8a1b] rounded-2xl">
                  <svg class="likes-icon like p-2 rounded-2xl size-7 hover:bg-[#4d6c6a1a] cursor-pointer" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M8.9707 19.42V13.89" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M2.28234 12.67C2.25751 12.2167 2.32536 11.7631 2.48175 11.3369C2.63813 10.9106 2.87975 10.5208 3.19187 10.1911C3.504 9.86141 3.88006 9.59877 4.29708 9.41931C4.71411 9.23985 5.16335 9.14734 5.61735 9.14734C6.07135 9.14734 6.52058 9.23985 6.93760 9.41931C7.35463 9.59877 7.73069 9.86141 8.04281 10.1911C8.35493 10.5208 8.59657 10.9106 8.75296 11.3369C8.90934 11.7631 8.97717 12.2167 8.95234 12.67V18.3C8.97717 18.7533 8.90934 19.2070 8.75296 19.6332C8.59657 20.0594 8.35493 20.4492 8.04281 20.7789C7.73069 21.1086 7.35463 21.3712 6.93760 21.5507C6.52058 21.7301 6.07135 21.8227 5.61735 21.8227C5.16335 21.8227 4.71411 21.7301 4.29708 21.5507C3.88006 21.3712 3.50400 21.1086 3.19187 20.7789C2.87975 20.4492 2.63813 20.0594 2.48175 19.6332C2.32536 19.2070 2.25751 18.7533 2.28234 18.3V12.67Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M8.97076 18.3C8.96813 18.7399 9.05217 19.176 9.21809 19.5835C9.38402 19.9909 9.62857 20.3617 9.93779 20.6747C10.247 20.9876 10.6148 21.2366 11.0203 21.4073C11.4257 21.5781 11.8608 21.6674 12.3008 21.67H16.4208C17.3814 21.6693 18.316 21.357 19.0841 20.78C19.8522 20.203 20.4125 19.3924 20.6808 18.47L22.1808 13.39C22.3002 13.0523 22.3372 12.691 22.2889 12.3361C22.2405 11.9812 22.1081 11.643 21.9028 11.3496C21.6974 11.0562 21.4249 10.816 21.1080 10.6491C20.7911 10.4822 20.4389 10.3934 20.0808 10.39H14.5608V5.10999C14.5621 4.91825 14.5256 4.72818 14.4535 4.55054C14.3813 4.37290 14.2749 4.21121 14.1402 4.07471C14.0056 3.93820 13.8454 3.82953 13.6687 3.75494C13.4921 3.68036 13.3025 3.64132 13.1108 3.64001V3.64001C12.7953 3.64144 12.4889 3.74572 12.2381 3.93701C11.9872 4.12830 11.8056 4.39617 11.7208 4.70001L8.97076 13.86" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span class="text-xs content-center">{{comment.likes}}</span>
                  <svg class="likes-icon dislike p-2 rounded-2xl size-7 hover:bg-[#4d6c6a1a] cursor-pointer" viewBox="-0.5 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.66992 5.5V11.03" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8.66992 11.03L11.4199 20.19C11.5048 20.4938 11.6864 20.7617 11.9372 20.953C12.1881 21.1443 12.4944 21.2486 12.8099 21.25V21.25C13.0016 21.2487 13.1912 21.2097 13.3679 21.1351C13.5445 21.0605 13.7047 20.9518 13.8394 20.8153C13.974 20.6788 14.0805 20.5171 14.1526 20.3395C14.2248 20.1618 14.2612 19.9718 14.2599 19.78V14.5" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2.00109 12.25C1.97626 12.7033 2.04411 13.157 2.2005 13.5832C2.35688 14.0094 2.59852 14.3993 2.91064 14.7289C3.22276 15.0586 3.59881 15.3212 4.01583 15.5007C4.43286 15.6801 4.88209 15.7727 5.33609 15.7727C5.79008 15.7727 6.23931 15.6801 6.65634 15.5007C7.07336 15.3212 7.44944 15.0586 7.76156 14.7289C8.07368 14.3993 8.31532 14.0094 8.47171 13.5832C8.62809 13.157 8.69594 12.7033 8.67111 12.25V6.62C8.69594 6.16668 8.62809 5.71308 8.47171 5.28687C8.31532 4.86065 8.07368 4.47074 7.76156 4.14105C7.44944 3.81136 7.07336 3.54878 6.65634 3.36932C6.23931 3.18986 5.79008 3.09729 5.33609 3.09729C4.88209 3.09729 4.43286 3.18986 4.01583 3.36932C3.59881 3.54878 3.22276 3.81136 2.91064 4.14105C2.59852 4.47074 2.35688 4.86065 2.2005 5.28687C2.04411 5.71308 1.97626 6.16668 2.00109 6.62V12.25Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8.66998 6.62C8.66735 6.18006 8.75137 5.74394 8.9173 5.33649C9.08322 4.92904 9.32777 4.55824 9.63699 4.2453C9.94621 3.93237 10.314 3.68341 10.7195 3.51263C11.1249 3.34186 11.56 3.25262 12 3.25H16.12C17.0806 3.25072 18.0152 3.56303 18.7833 4.14001C19.5514 4.717 20.1117 5.52755 20.38 6.45001L21.88 11.53C21.9994 11.8677 22.0365 12.229 21.9881 12.5839C21.9397 12.9387 21.8074 13.277 21.602 13.5704C21.3966 13.8638 21.1241 14.104 20.8072 14.2709C20.4903 14.4378 20.1381 14.5266 19.78 14.53H14.28" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </div>
          </div>
        }
        
      </div>
    </div> -->
  </article>
    </div>
    <div class="side-content col-span-12 lg:col-span-4 flex flex-col min-h-screen sticky gap-6">
      <app-side-group></app-side-group>
      <app-footer></app-footer>
    </div>
  </div>
}@else {
  <p>loading...</p>
}